<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, minimum-scale=1" />
<meta name="generator" content="pdoc 0.10.0" />
<title>sbx.cli API documentation</title>
<meta name="description" content="SBX Command line interface functionality" />
<link rel="preload stylesheet" as="style" href="https://cdnjs.cloudflare.com/ajax/libs/10up-sanitize.css/11.0.1/sanitize.min.css" integrity="sha256-PK9q560IAAa6WVRRh76LtCaI8pjTJ2z11v0miyNNjrs=" crossorigin>
<link rel="preload stylesheet" as="style" href="https://cdnjs.cloudflare.com/ajax/libs/10up-sanitize.css/11.0.1/typography.min.css" integrity="sha256-7l/o7C8jubJiy74VsKTidCy1yBkRtiUGbVkYBylBqUg=" crossorigin>
<link rel="stylesheet preload" as="style" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.1.1/styles/github.min.css" crossorigin>
<style>:root{--highlight-color:#fe9}.flex{display:flex !important}body{line-height:1.5em}#content{padding:20px}#sidebar{padding:30px;overflow:hidden}#sidebar > *:last-child{margin-bottom:2cm}.http-server-breadcrumbs{font-size:130%;margin:0 0 15px 0}#footer{font-size:.75em;padding:5px 30px;border-top:1px solid #ddd;text-align:right}#footer p{margin:0 0 0 1em;display:inline-block}#footer p:last-child{margin-right:30px}h1,h2,h3,h4,h5{font-weight:300}h1{font-size:2.5em;line-height:1.1em}h2{font-size:1.75em;margin:1em 0 .50em 0}h3{font-size:1.4em;margin:25px 0 10px 0}h4{margin:0;font-size:105%}h1:target,h2:target,h3:target,h4:target,h5:target,h6:target{background:var(--highlight-color);padding:.2em 0}a{color:#058;text-decoration:none;transition:color .3s ease-in-out}a:hover{color:#e82}.title code{font-weight:bold}h2[id^="header-"]{margin-top:2em}.ident{color:#900}pre code{background:#f8f8f8;font-size:.8em;line-height:1.4em}code{background:#f2f2f1;padding:1px 4px;overflow-wrap:break-word}h1 code{background:transparent}pre{background:#f8f8f8;border:0;border-top:1px solid #ccc;border-bottom:1px solid #ccc;margin:1em 0;padding:1ex}#http-server-module-list{display:flex;flex-flow:column}#http-server-module-list div{display:flex}#http-server-module-list dt{min-width:10%}#http-server-module-list p{margin-top:0}.toc ul,#index{list-style-type:none;margin:0;padding:0}#index code{background:transparent}#index h3{border-bottom:1px solid #ddd}#index ul{padding:0}#index h4{margin-top:.6em;font-weight:bold}@media (min-width:200ex){#index .two-column{column-count:2}}@media (min-width:300ex){#index .two-column{column-count:3}}dl{margin-bottom:2em}dl dl:last-child{margin-bottom:4em}dd{margin:0 0 1em 3em}#header-classes + dl > dd{margin-bottom:3em}dd dd{margin-left:2em}dd p{margin:10px 0}.name{background:#eee;font-weight:bold;font-size:.85em;padding:5px 10px;display:inline-block;min-width:40%}.name:hover{background:#e0e0e0}dt:target .name{background:var(--highlight-color)}.name > span:first-child{white-space:nowrap}.name.class > span:nth-child(2){margin-left:.4em}.inherited{color:#999;border-left:5px solid #eee;padding-left:1em}.inheritance em{font-style:normal;font-weight:bold}.desc h2{font-weight:400;font-size:1.25em}.desc h3{font-size:1em}.desc dt code{background:inherit}.source summary,.git-link-div{color:#666;text-align:right;font-weight:400;font-size:.8em;text-transform:uppercase}.source summary > *{white-space:nowrap;cursor:pointer}.git-link{color:inherit;margin-left:1em}.source pre{max-height:500px;overflow:auto;margin:0}.source pre code{font-size:12px;overflow:visible}.hlist{list-style:none}.hlist li{display:inline}.hlist li:after{content:',\2002'}.hlist li:last-child:after{content:none}.hlist .hlist{display:inline;padding-left:1em}img{max-width:100%}td{padding:0 .5em}.admonition{padding:.1em .5em;margin-bottom:1em}.admonition-title{font-weight:bold}.admonition.note,.admonition.info,.admonition.important{background:#aef}.admonition.todo,.admonition.versionadded,.admonition.tip,.admonition.hint{background:#dfd}.admonition.warning,.admonition.versionchanged,.admonition.deprecated{background:#fd4}.admonition.error,.admonition.danger,.admonition.caution{background:lightpink}</style>
<style media="screen and (min-width: 700px)">@media screen and (min-width:700px){#sidebar{width:30%;height:100vh;overflow:auto;position:sticky;top:0}#content{width:70%;max-width:100ch;padding:3em 4em;border-left:1px solid #ddd}pre code{font-size:1em}.item .name{font-size:1em}main{display:flex;flex-direction:row-reverse;justify-content:flex-end}.toc ul ul,#index ul{padding-left:1.5em}.toc > ul > li{margin-top:.5em}}</style>
<style media="print">@media print{#sidebar h1{page-break-before:always}.source{display:none}}@media print{*{background:transparent !important;color:#000 !important;box-shadow:none !important;text-shadow:none !important}a[href]:after{content:" (" attr(href) ")";font-size:90%}a[href][title]:after{content:none}abbr[title]:after{content:" (" attr(title) ")"}.ir a:after,a[href^="javascript:"]:after,a[href^="#"]:after{content:""}pre,blockquote{border:1px solid #999;page-break-inside:avoid}thead{display:table-header-group}tr,img{page-break-inside:avoid}img{max-width:100% !important}@page{margin:0.5cm}p,h2,h3{orphans:3;widows:3}h1,h2,h3,h4,h5,h6{page-break-after:avoid}}</style>
<script defer src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.1.1/highlight.min.js" integrity="sha256-Uv3H6lx7dJmRfRvH8TH6kJD1TSK1aFcwgx+mdg3epi8=" crossorigin></script>
<script>window.addEventListener('DOMContentLoaded', () => hljs.initHighlighting())</script>
</head>
<body>
<main>
<article id="content">
<header>
<h1 class="title">Module <code>sbx.cli</code></h1>
</header>
<section id="section-intro">
<p>SBX Command line interface functionality</p>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">&#34;&#34;&#34;
SBX Command line interface functionality
&#34;&#34;&#34;

import os
import sys
import typing
from argparse import ArgumentParser, Namespace
from pathlib import Path

from sbx.core.card import Card
from sbx.core.study import CardStack
from sbx.core.utility import Unbuffered
from sbx.ui.editor import EditorInterface
from sbx.ui.study import StudyInterface


def editor(args: Namespace):
    &#34;&#34;&#34;Edit file command&#34;&#34;&#34;
    EditorInterface(Card(args.file)).run()


def _set_content(card: Card, content: typing.List[str], style: bool):
    title_prefix = &#34;&#34;
    answer_prefix = &#34;&#34;
    if style:
        title_prefix = &#34;# &#34;
        answer_prefix = &#34;* &#34;
    card.front = title_prefix + content[0]
    if len(content) &gt; 1:
        card.back = os.linesep.join([answer_prefix + x for x in content[1:]])


def create(args: Namespace):
    &#34;&#34;&#34;Create file command&#34;&#34;&#34;
    content = args.content
    path = Path(os.path.abspath(args.file))
    if path.is_file() or path.exists():
        print(&#34;File {!r} already exists!&#34;.format(str(path)))
        sys.exit(-1)
    card = Card(str(path))
    card.front = &#34;Enter front of the card here ...&#34;
    card.back = &#34;Enter back of the card here...&#34;
    if content:
        _set_content(card, content, args.markdown)
    card.save()
    print(&#34;File written to {!r}&#34;.format(str(path)))


def reset(args: Namespace):
    &#34;&#34;&#34;Reset file command&#34;&#34;&#34;
    path = Path(os.path.abspath(args.file))
    if not (path.is_file() and path.exists()):
        print(&#34;File {!r} doesn&#39;t exist&#34;.format(str(path)))
        sys.exit(-1)
    card = Card(str(path))
    card.reset()
    card.save()
    print(&#34;File written to {!r}&#34;.format(str(path)))


def study(args: Namespace):
    &#34;&#34;&#34;Study cards command&#34;&#34;&#34;
    StudyInterface(
        CardStack(args.path, args.rec, args.all, args.leech, args.zero)
    ).run()


def list_cards(args: Namespace):
    &#34;&#34;&#34;List cards command&#34;&#34;&#34;
    stk = CardStack(args.path, args.rec, args.all, args.leech, args.zero)
    file_only = args.file_only

    for card in stk.iter():
        if file_only:
            print(card.path)
        elif args.no_color:
            print(&#34;- - - - - &#34; * 4)
            print(str(card))
        else:
            print(&#34;- - - - - &#34; * 4)
            card.to_formatted().print()


def _add_filtering_args(sub_parser):
    # Note these are common for both list &amp; study commands
    sub_parser.add_argument(
        &#34;path&#34;,
        type=str,
        help=&#34;path with collection of sbx flash-card format .md files&#34;,
    )
    sub_parser.add_argument(
        &#34;-i&#34;,
        &#34;--include-not-scheduled&#34;,
        dest=&#34;all&#34;,
        default=False,
        action=&#34;store_true&#34;,
        help=&#34;include cards that are not scheduled for today&#39;s study session&#34;,
    )
    sub_parser.add_argument(
        &#34;-r&#34;,
        &#34;--recursive&#34;,
        dest=&#34;rec&#34;,
        default=False,
        action=&#34;store_true&#34;,
        help=&#34;scan all sub directories for .md files&#34;,
    )
    sub_parser.add_argument(
        &#34;-l&#34;,
        &#34;--leech&#34;,
        dest=&#34;leech&#34;,
        default=False,
        action=&#34;store_true&#34;,
        help=&#34;select leech cards (of current subset)&#34;,
    )
    sub_parser.add_argument(
        &#34;-z&#34;,
        &#34;--zero&#34;,
        dest=&#34;zero&#34;,
        default=False,
        action=&#34;store_true&#34;,
        help=&#34;select cards that were marked zero&#34;
        &#34; last time (of current subset)&#34;,
    )


def run(arguments: typing.List[str]):
    &#34;&#34;&#34;
    Run sbx command line program

    * `arguments` - List of arguments to passed to `sbx` command
    &#34;&#34;&#34;
    parser = ArgumentParser(
        prog=&#34;sbx&#34;,
        description=&#34;Sbx - Flashcard application on the terminal&#34;,
        add_help=True,
    )

    parser.add_argument(
        &#34;-u&#34;,
        &#34;--unbuffered&#34;,
        dest=&#34;unbuffered&#34;,
        default=False,
        action=&#34;store_true&#34;,
        help=&#34;ensure output is unbuffered&#34;,
    )

    subparsers = parser.add_subparsers(dest=&#34;action&#34;)
    subparsers.required = True

    # Edit
    edit_parser = subparsers.add_parser(&#34;edit&#34;, help=&#34;edit a card&#34;)
    edit_parser.add_argument(
        &#34;file&#34;,
        type=str,
        help=&#34;card file (ensure it&#39;s a .md so &#34;
        &#34;you can use it in study mode)&#34;,
    )
    edit_parser.set_defaults(func=editor)
    # Create
    create_parser = subparsers.add_parser(&#34;create&#34;, help=&#34;create a new card&#34;)
    create_parser.add_argument(
        &#34;file&#34;,
        type=str,
        help=&#34;card file (ensure it&#39;s a .md so &#34;
        &#34;you can use it in study mode)&#34;,
    )
    create_parser.add_argument(
        &#34;content&#34;,
        type=str,
        nargs=&#34;*&#34;,
        default=None,
        help=&#34;content of the card, first element is taken as front.&#34;
        &#34;Rest is added to back as individual lines&#34;,
    )
    create_parser.add_argument(
        &#34;-m&#34;,
        &#34;--markdown-header-and-bullet&#34;,
        dest=&#34;markdown&#34;,
        default=False,
        action=&#34;store_true&#34;,
        help=&#34;if content is provided this will prepend card front content&#34;
        &#34;with a &#39;# &#39; and all lines in back with &#39;* &#39;&#34;,
    )
    create_parser.set_defaults(func=create)

    # Reset
    reset_parser = subparsers.add_parser(&#34;reset&#34;, help=&#34;reset a card&#34;)
    reset_parser.add_argument(
        &#34;file&#34;,
        type=str,
        help=&#34;card file (ensure it&#39;s a .md so &#34;
        &#34;you can use it in study mode)&#34;,
    )
    reset_parser.set_defaults(func=reset)

    # Study
    study_parser = subparsers.add_parser(
        &#34;study&#34;, help=&#34;start a study session on given path&#34;
    )
    _add_filtering_args(study_parser)
    study_parser.set_defaults(func=study)

    # List Cards
    list_parser = subparsers.add_parser(&#34;list&#34;, help=&#34;list cards&#34;)
    _add_filtering_args(list_parser)
    list_parser.add_argument(
        &#34;-n&#34;,
        &#34;--file-name-only&#34;,
        dest=&#34;file_only&#34;,
        default=False,
        action=&#34;store_true&#34;,
        help=&#34;only list file name&#34;,
    )
    list_parser.add_argument(
        &#34;--no-color&#34;,
        dest=&#34;no_color&#34;,
        default=False,
        action=&#34;store_true&#34;,
        help=&#34;don&#39;t use colours&#34;,
    )
    list_parser.set_defaults(func=list_cards)

    result = parser.parse_args(arguments)

    if result.unbuffered:
        sys.stdout = Unbuffered(sys.stdout)  # type: ignore

    result.func(result)</code></pre>
</details>
</section>
<section>
</section>
<section>
</section>
<section>
<h2 class="section-title" id="header-functions">Functions</h2>
<dl>
<dt id="sbx.cli.create"><code class="name flex">
<span>def <span class="ident">create</span></span>(<span>args: argparse.Namespace)</span>
</code></dt>
<dd>
<div class="desc"><p>Create file command</p></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def create(args: Namespace):
    &#34;&#34;&#34;Create file command&#34;&#34;&#34;
    content = args.content
    path = Path(os.path.abspath(args.file))
    if path.is_file() or path.exists():
        print(&#34;File {!r} already exists!&#34;.format(str(path)))
        sys.exit(-1)
    card = Card(str(path))
    card.front = &#34;Enter front of the card here ...&#34;
    card.back = &#34;Enter back of the card here...&#34;
    if content:
        _set_content(card, content, args.markdown)
    card.save()
    print(&#34;File written to {!r}&#34;.format(str(path)))</code></pre>
</details>
</dd>
<dt id="sbx.cli.editor"><code class="name flex">
<span>def <span class="ident">editor</span></span>(<span>args: argparse.Namespace)</span>
</code></dt>
<dd>
<div class="desc"><p>Edit file command</p></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def editor(args: Namespace):
    &#34;&#34;&#34;Edit file command&#34;&#34;&#34;
    EditorInterface(Card(args.file)).run()</code></pre>
</details>
</dd>
<dt id="sbx.cli.list_cards"><code class="name flex">
<span>def <span class="ident">list_cards</span></span>(<span>args: argparse.Namespace)</span>
</code></dt>
<dd>
<div class="desc"><p>List cards command</p></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def list_cards(args: Namespace):
    &#34;&#34;&#34;List cards command&#34;&#34;&#34;
    stk = CardStack(args.path, args.rec, args.all, args.leech, args.zero)
    file_only = args.file_only

    for card in stk.iter():
        if file_only:
            print(card.path)
        elif args.no_color:
            print(&#34;- - - - - &#34; * 4)
            print(str(card))
        else:
            print(&#34;- - - - - &#34; * 4)
            card.to_formatted().print()</code></pre>
</details>
</dd>
<dt id="sbx.cli.reset"><code class="name flex">
<span>def <span class="ident">reset</span></span>(<span>args: argparse.Namespace)</span>
</code></dt>
<dd>
<div class="desc"><p>Reset file command</p></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def reset(args: Namespace):
    &#34;&#34;&#34;Reset file command&#34;&#34;&#34;
    path = Path(os.path.abspath(args.file))
    if not (path.is_file() and path.exists()):
        print(&#34;File {!r} doesn&#39;t exist&#34;.format(str(path)))
        sys.exit(-1)
    card = Card(str(path))
    card.reset()
    card.save()
    print(&#34;File written to {!r}&#34;.format(str(path)))</code></pre>
</details>
</dd>
<dt id="sbx.cli.run"><code class="name flex">
<span>def <span class="ident">run</span></span>(<span>arguments: List[str])</span>
</code></dt>
<dd>
<div class="desc"><p>Run sbx command line program</p>
<ul>
<li><code>arguments</code> - List of arguments to passed to <code><a title="sbx" href="../index.html">sbx</a></code> command</li>
</ul></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def run(arguments: typing.List[str]):
    &#34;&#34;&#34;
    Run sbx command line program

    * `arguments` - List of arguments to passed to `sbx` command
    &#34;&#34;&#34;
    parser = ArgumentParser(
        prog=&#34;sbx&#34;,
        description=&#34;Sbx - Flashcard application on the terminal&#34;,
        add_help=True,
    )

    parser.add_argument(
        &#34;-u&#34;,
        &#34;--unbuffered&#34;,
        dest=&#34;unbuffered&#34;,
        default=False,
        action=&#34;store_true&#34;,
        help=&#34;ensure output is unbuffered&#34;,
    )

    subparsers = parser.add_subparsers(dest=&#34;action&#34;)
    subparsers.required = True

    # Edit
    edit_parser = subparsers.add_parser(&#34;edit&#34;, help=&#34;edit a card&#34;)
    edit_parser.add_argument(
        &#34;file&#34;,
        type=str,
        help=&#34;card file (ensure it&#39;s a .md so &#34;
        &#34;you can use it in study mode)&#34;,
    )
    edit_parser.set_defaults(func=editor)
    # Create
    create_parser = subparsers.add_parser(&#34;create&#34;, help=&#34;create a new card&#34;)
    create_parser.add_argument(
        &#34;file&#34;,
        type=str,
        help=&#34;card file (ensure it&#39;s a .md so &#34;
        &#34;you can use it in study mode)&#34;,
    )
    create_parser.add_argument(
        &#34;content&#34;,
        type=str,
        nargs=&#34;*&#34;,
        default=None,
        help=&#34;content of the card, first element is taken as front.&#34;
        &#34;Rest is added to back as individual lines&#34;,
    )
    create_parser.add_argument(
        &#34;-m&#34;,
        &#34;--markdown-header-and-bullet&#34;,
        dest=&#34;markdown&#34;,
        default=False,
        action=&#34;store_true&#34;,
        help=&#34;if content is provided this will prepend card front content&#34;
        &#34;with a &#39;# &#39; and all lines in back with &#39;* &#39;&#34;,
    )
    create_parser.set_defaults(func=create)

    # Reset
    reset_parser = subparsers.add_parser(&#34;reset&#34;, help=&#34;reset a card&#34;)
    reset_parser.add_argument(
        &#34;file&#34;,
        type=str,
        help=&#34;card file (ensure it&#39;s a .md so &#34;
        &#34;you can use it in study mode)&#34;,
    )
    reset_parser.set_defaults(func=reset)

    # Study
    study_parser = subparsers.add_parser(
        &#34;study&#34;, help=&#34;start a study session on given path&#34;
    )
    _add_filtering_args(study_parser)
    study_parser.set_defaults(func=study)

    # List Cards
    list_parser = subparsers.add_parser(&#34;list&#34;, help=&#34;list cards&#34;)
    _add_filtering_args(list_parser)
    list_parser.add_argument(
        &#34;-n&#34;,
        &#34;--file-name-only&#34;,
        dest=&#34;file_only&#34;,
        default=False,
        action=&#34;store_true&#34;,
        help=&#34;only list file name&#34;,
    )
    list_parser.add_argument(
        &#34;--no-color&#34;,
        dest=&#34;no_color&#34;,
        default=False,
        action=&#34;store_true&#34;,
        help=&#34;don&#39;t use colours&#34;,
    )
    list_parser.set_defaults(func=list_cards)

    result = parser.parse_args(arguments)

    if result.unbuffered:
        sys.stdout = Unbuffered(sys.stdout)  # type: ignore

    result.func(result)</code></pre>
</details>
</dd>
<dt id="sbx.cli.study"><code class="name flex">
<span>def <span class="ident">study</span></span>(<span>args: argparse.Namespace)</span>
</code></dt>
<dd>
<div class="desc"><p>Study cards command</p></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def study(args: Namespace):
    &#34;&#34;&#34;Study cards command&#34;&#34;&#34;
    StudyInterface(
        CardStack(args.path, args.rec, args.all, args.leech, args.zero)
    ).run()</code></pre>
</details>
</dd>
</dl>
</section>
<section>
</section>
</article>
<nav id="sidebar">
<h1>Index</h1>
<div class="toc">
<ul></ul>
</div>
<ul id="index">
<li><h3>Super-module</h3>
<ul>
<li><code><a title="sbx" href="../index.html">sbx</a></code></li>
</ul>
</li>
<li><h3><a href="#header-functions">Functions</a></h3>
<ul class="two-column">
<li><code><a title="sbx.cli.create" href="#sbx.cli.create">create</a></code></li>
<li><code><a title="sbx.cli.editor" href="#sbx.cli.editor">editor</a></code></li>
<li><code><a title="sbx.cli.list_cards" href="#sbx.cli.list_cards">list_cards</a></code></li>
<li><code><a title="sbx.cli.reset" href="#sbx.cli.reset">reset</a></code></li>
<li><code><a title="sbx.cli.run" href="#sbx.cli.run">run</a></code></li>
<li><code><a title="sbx.cli.study" href="#sbx.cli.study">study</a></code></li>
</ul>
</li>
</ul>
</nav>
</main>
<footer id="footer">
<p>Generated by <a href="https://pdoc3.github.io/pdoc" title="pdoc: Python API documentation generator"><cite>pdoc</cite> 0.10.0</a>.</p>
</footer>
</body>
</html>